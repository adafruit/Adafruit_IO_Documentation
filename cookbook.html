


<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Adafruit IO API Cookbook</title>

    <link href="images/favicon/favicon.ico" rel="icon" type="image/ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
    <link rel="manifest" href="images/favicon/site.webmanifest">
    <link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#00A7E9">
    <meta name="msapplication-TileColor" content="#00A7E9">
    <meta name="theme-color" content="#000000">

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="cookbook" data-languages="[&quot;shell&quot;,&quot;cpp&quot;,&quot;python&quot;,&quot;python&quot;,&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="" />

        <div class="lang-selector">
              <a href="#" data-language-name="shell">CURL</a>
              <a href="#" data-language-name="cpp">Arduino</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="python">Circuitpython</a>
              <a href="#" data-language-name="ruby">Ruby</a>
        </div>

        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>

      <ul id="toc" class="toc-list-h1">
            <li>
<a href="./" class="toc-h1 toc-link prepend">                Adafruit IO HTTP API
                <i class="fa fa-external-link"></i>
</a>            </li>
            <li>
<a href="mqtt.html" class="toc-h1 toc-link prepend">                Adafruit IO MQTT API
                <i class="fa fa-external-link"></i>
</a>            </li>

          <li class="on-screen">
            <a href="#adafruit-io-api-cookbook" class="toc-h1 toc-link" data-title="Adafruit IO API Cookbook">
              Adafruit IO API Cookbook
            </a>
          </li>
          <li class="on-screen">
            <a href="#feed-identifiers" class="toc-h1 toc-link" data-title="Feed Identifiers">
              Feed Identifiers
            </a>
          </li>
          <li class="on-screen">
            <a href="#formatting-values" class="toc-h1 toc-link" data-title="Formatting values">
              Formatting values
                <span class="menu-arrow">
                  <svg width="18" height="18" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>
                  <!-- <span>&gt;</span> -->
                </span>
            </a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#floating-point-data" class="toc-h2 toc-link" data-title="Floating Point Data">Floating Point Data</a>
                  </li>
              </ul>
          </li>
          <li class="on-screen">
            <a href="#image-data" class="toc-h1 toc-link" data-title="Image Data">
              Image Data
                <span class="menu-arrow">
                  <svg width="18" height="18" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>
                  <!-- <span>&gt;</span> -->
                </span>
            </a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#design-considerations" class="toc-h2 toc-link" data-title="Design Considerations">Design Considerations</a>
                  </li>
                  <li>
                    <a href="#publishing-image-data" class="toc-h2 toc-link" data-title="Publishing Image Data">Publishing Image Data</a>
                  </li>
              </ul>
          </li>
          <li class="on-screen">
            <a href="#sending-and-storing-json" class="toc-h1 toc-link" data-title="Sending and Storing JSON">
              Sending and Storing JSON
                <span class="menu-arrow">
                  <svg width="18" height="18" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>
                  <!-- <span>&gt;</span> -->
                </span>
            </a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#double-encoded-json-strings" class="toc-h2 toc-link" data-title="Double encoded JSON strings">Double encoded JSON strings</a>
                  </li>
                  <li>
                    <a href="#io-formatted-json" class="toc-h2 toc-link" data-title="IO formatted JSON">IO formatted JSON</a>
                  </li>
                  <li>
                    <a href="#non-io-formatted-json" class="toc-h2 toc-link" data-title="Non-IO formatted JSON">Non-IO formatted JSON</a>
                  </li>
                  <li>
                    <a href="#that-39-s-not-json-at-all" class="toc-h2 toc-link" data-title="That's not JSON at all!">That's not JSON at all!</a>
                  </li>
              </ul>
          </li>
          <li class="on-screen">
            <a href="#webhook-receivers" class="toc-h1 toc-link" data-title="Webhook Receivers">
              Webhook Receivers
                <span class="menu-arrow">
                  <svg width="18" height="18" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>
                  <!-- <span>&gt;</span> -->
                </span>
            </a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#raw-webhooks" class="toc-h2 toc-link" data-title="Raw Webhooks">Raw Webhooks</a>
                  </li>
                  <li>
                    <a href="#notify-webhooks" class="toc-h2 toc-link" data-title="Notify Webhooks">Notify Webhooks</a>
                  </li>
              </ul>
          </li>
          <li class="on-screen">
            <a href="#securing-your-io-account" class="toc-h1 toc-link" data-title="Securing your IO Account">
              Securing your IO Account
                <span class="menu-arrow">
                  <svg width="18" height="18" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1171 960q0 13-10 23l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23z"/></svg>
                  <!-- <span>&gt;</span> -->
                </span>
            </a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#i-accidentially-shared-my-key-what-do-i-do-now" class="toc-h2 toc-link" data-title="I accidentially shared my key, what do I do now?">I accidentially shared my key, what do I do now?</a>
                  </li>
              </ul>
          </li>


      </ul>
        <ul class="toc-footer">
            <li><a href='https://io.adafruit.com'>Adafruit IO</a></li>
            <li><a href='https://io.adafruit.com/blog'>Adafruit IO News</a></li>
            <li><a href='https://io.adafruit.com/plus'>Adafruit IO Plus</a></li>
            <li><a href='https://io.adafruit.com/terms'>Adafruit IO ToS</a></li>
            <li><a href='https://io.adafruit.com/feedback'>Submit Feedback</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>

      <div class="content">
        <h1 id='adafruit-io-api-cookbook'>Adafruit IO API Cookbook</h1>
<p>This page contains a number of recipes related to Adafruit IO which have been found useful in the past. You can add and contribute to this file by filing an <code>issue</code> on the GitHub repository, or by editing this file and submitting a pull request.</p>
<h1 id='feed-identifiers'>Feed Identifiers</h1>
<p>Names are for humans.</p>

<p>Keys are for computers.</p>

<p>You tell the computer the name, and it will tell you the key.</p>

<p>When  using  Adafruit  IO, you&#39;ll want to tell the client (the computer) the feed&#39;s <strong>key</strong> instead of the feed&#39;s <strong>name</strong>.</p>

<p>For more information about this topic:, visit <a href="https://learn.adafruit.com/naming-things-in-adafruit-io/introduction">the learn guide for feeds</a> or the <a href="https://io.adafruit.com/blog/tips/2016/07/14/naming-feeds">IO Development blog post about naming feeds</a>.</p>
<h1 id='formatting-values'>Formatting values</h1>
<p>Adafruit IO stores all data as UTF-8 strings without applying formatting. <em>Some</em> data is formatted when rendered on dashboards, but you should always be able to get back what you sent.</p>
<h2 id='floating-point-data'>Floating Point Data</h2>
<p>If you&#39;re <em>sending</em> <code>3.1415</code> but you only want to <em>see</em> <code>3.14</code> - reduce the value to the desired amount of precision in your code. You can round (up or down) or truncate this value to get it in the format you want Adafruit IO to display.</p>
<h1 id='image-data'>Image Data</h1>
<p>Using an <em>Image Block</em> on an Adafruit IO, you can automatically display a Base64 image data string on your dashboard by sending a Base64 image data string to an Adafruit IO feed. By dragging and dropping an image onto the block in your browser, you can also send image data on the same feed.</p>
<h2 id='design-considerations'>Design Considerations</h2>
<p>There are some important things to keep in mind when using this feature. Normal feeds are limited to 1KB of data, or about 1024 bytes, for publishing. Turning off feed history from the feed settings page allows publishing up to 100KB, or 102400 bytes, of data.</p>

<p>When using the drag-and-drop feature of Adafruit IO dashboards or feed pages, image conversion from binary to Base64 happens inside the browser. That means no image pre-compression or optimization and additional size boost due to the conversion from binary to Base64.</p>

<p>Youâ€™ll have to do your own testing to figure out what an appropriate image size and format (png, gif, or bmp) for you are. For example,  <a href="https://io.adafruit.com/blog/images/2016-12-14-power-switch.png">the .png image used for testing</a>  below has an on disk size of 68089 bytes, but a Base64 value of 90788 bytes, an expansion factor of about 150%, which is really close to the limit.</p>

<p><img src="https://io.adafruit.com/blog/images/2018-08-10-image-upload-size.png" alt="base64imagepreview" /></p>

<p>Flat colored .png images are particularly well suited to small image sizes. The image below is 1024 x 768 pixels and was run through the <a href="https://imageoptim.com/versions">ImageOptim</a> tool. The base size on disk is 10665 bytes and the Base64 encoded size is 14221 bytes.</p>

<p><img src="images/cookbook/plain-text-on-a-plain-background.png" alt="" /></p>

<p>By optimizing heavily with imagemagick, I was able to get an image under 1024 bytes. The gif below is 703 bytes on disk and 941 bytes when converted to Base64, so it will work even on feeds with history turned on.</p>
<div class="highlight"><pre class="highlight sh tab-shell"><code><span class="c"># on macOS 10.14 with ImageMagick 6.9.9-37</span>
<span class="nv">$ </span>convert small-image-with-text.gif <span class="nt">-colors</span> 3 <span class="se">\</span>
    <span class="nt">-strip</span> <span class="nt">-coalesce</span> <span class="nt">-layers</span> Optimize <span class="se">\</span>
    small-image-with-text-optim.gif
<span class="nv">$ </span><span class="nb">base64</span> <span class="nt">-i</span> small-image-with-text-optim.gif <span class="se">\</span>
    <span class="nt">-o</span> small-image-with-text-optim.gif.base64
</code></pre></div>
<p><img src="images/cookbook/small-image-with-text-optim.gif" alt="" /></p>
<h2 id='publishing-image-data'>Publishing Image Data</h2>
<p><a href="https://gist.github.com/abachman/b0d3687227da7f82818174a89b325588">Here&#39;s an example Python sketch</a> that publishes image data to an Adafruit IO feed when a signal is received on another IO feed.</p>

<p>The two most important factors for published image data size are image resolution and image formatting. The <a href="https://pypi.org/project/Pillow/">Python Imaging Library</a> (<code>pillow</code>) allows us to resize images and has built in support for jpeg optimization.</p>

<p>The key chunk of code is here:</p>

<div class="center-column"></div>
<div class="highlight"><pre class="highlight plaintext"><code># create an in-memory file to store raw image data
stream = io.BytesIO()

# write camera data to the stream (file)
camera.capture(stream, format='jpeg', resize=(800, 600))
stream.seek(0)

# use Python Imaging Library to optimize the final image data
image = Image.open(stream, 'r')
optim_stream = io.BytesIO()
image.save(optim_stream, format='jpeg', quality=70, optimize=True)
optim_stream.seek(0)

# convert image binary data to base64 string
value = base64.b64encode(optim_stream.read())

if len(value) &gt; 102400:
    print("image file too big!")
    return

client.publish('image-stream', value)
</code></pre></div>
<p>We create an image, optimize it, convert it to a Base64 string, and then immediately publish that string to Adafruit IO. It&#39;s also worth noting that we never save the image file to disk, it is only ever present in memory, which saves a bit of wear-and-tear on our Raspberry Pi microSD card.</p>

<p>If you wanted to do the same from a single command line command, given an existing image file, you could use curl&#39;s support for uploading files from stdin:</p>

<div class="center-column"></div>
<div class="highlight"><pre class="highlight plaintext"><code>$ base64 image.jpg | curl -F value=@- -H "X-AIO-Key: {io_key}" \
    https://io.adafruit.com/api/v2/{username}/feeds/{feed_key}/data
</code></pre></div>
<p>The <code>-F value=@-</code> tells curl, &quot;I want to POST a multipart form with a single parameter named &#39;value&#39; whose value is the input to this command.&quot; The preceding <code>base64</code> command and the <code>|</code> character mean that the input to the curl command is the base64 string version of the binary image data.</p>

<p>Stop by the forums if this leaves you with questions or if you&#39;re looking for examples in your favorite programming language :D</p>
<h1 id='sending-and-storing-json'>Sending and Storing JSON</h1><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// A basic data record</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="mf">22.587</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lat</span><span class="dl">"</span><span class="p">:</span> <span class="mf">38.1123</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lon</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mf">91.2325</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">ele</span><span class="dl">"</span><span class="p">:</span> <span class="mi">112</span>
<span class="p">}</span>
</code></pre></div>
<p>Because Adafruit IO supports additional features beyond a basic MQTT brokering service, such as location tagging for data points, the service supports data in the JSON format described in the <a href="/#create-data">HTTP create data API description</a>.</p>

<p>This lets us store the individual value, <code>22.587</code>, and data about the value: its latitude, longitude, and elevation. Data about the data is &quot;metadata&quot;!</p>

<p>But what happens when the value you want to send is itself JSON? Good news! There are a few solutions available to you in that situation.</p>
<h2 id='double-encoded-json-strings'>Double encoded JSON strings</h2>
<p><strong>The safest way to can send JSON data as a value</strong> is to &quot;double encode&quot; it before sending, in which case IO will treat it as a raw string. If you&#39;re using something like javascript&#39;s <code>JSON.stringify</code> function or Ruby&#39;s <code>JSON.generate</code>, double encoding means passing the result of <code>JSON.stringify</code> through <code>JSON.stringify</code> a second time.</p>

<div class="center-column"></div>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="dl">"</span><span class="s2">sensor-1</span><span class="dl">"</span><span class="p">:</span><span class="mf">22.587</span><span class="p">,</span><span class="dl">"</span><span class="s2">sensor-2</span><span class="dl">"</span><span class="p">:</span><span class="mf">13.182</span><span class="p">})</span>
<span class="p">})</span>
</code></pre></div>
<p>The double encoded JSON string can be sent directly through Adafruit IO without interference from our processing system, because the processing system will not interpret it as JSON. In your receiving code, because the value passed through includes surrounding double quotes, you have to call your parse function twice to restore the JSON object.</p>

<p><strong>Important Note:</strong> Data saved in this manner (multiple records saved as JSON in a single feed) will make the data unusable by the IO dashboard and other features such as actions. IO needs a single value saved into a feed in order to use it in this manner. Saving the JSON objects into a feed is a useful feature if you only need to use the data between two devices, for example.</p>

<div class="center-column"></div>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</code></pre></div><h2 id='io-formatted-json'>IO formatted JSON</h2><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">sensor-1</span><span class="dl">"</span><span class="p">:</span><span class="mf">22.587</span><span class="p">,</span><span class="dl">"</span><span class="s2">sensor-2</span><span class="dl">"</span><span class="p">:</span><span class="mf">13.182</span><span class="p">},</span>
  <span class="dl">"</span><span class="s2">lat</span><span class="dl">"</span><span class="p">:</span> <span class="mf">38.1123</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">lon</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mf">91.2325</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">ele</span><span class="dl">"</span><span class="p">:</span> <span class="mi">112</span>
<span class="p">}</span>
</code></pre></div>
<p>The simplest way to send JSON data to Adafruit IO is include it directly in the datum formatted record you send to IO. For example, if instead of 22.587, I wanted to send something like, {&quot;sensor-1&quot;:22.587,&quot;sensor-2&quot;:13.182}, the &quot;wrapped&quot; version would look like the value on the right.</p>

<p>It&#39;s worth noting that because Adafruit IO parses the entire JSON object that you send it, any valid JSON will be parsed and when it is stored in our system and forwarded to any subscribers, it will be regenerated. The significance of that is that if you publish JSON data with whitespace, it will be stored and republished without whitespace, because our generator produces the most compact JSON format possible.</p>
<h2 id='non-io-formatted-json'>Non-IO formatted JSON</h2><div class="highlight"><pre class="highlight plaintext"><code>curl -H "Content-Type: application/json" \
    -H "X-AIO-Key: toomanysecrets" \
    --data '{"sensor-1":22.587,"sensor-2":13.182}' \
    https://io.adafruit.com/api/v2/username/feeds/feed-key/data
</code></pre></div>
<p>Another way you can send raw JSON data is to just send it. If Adafruit IO doesn&#39;t find a &quot;value&quot; key in the JSON object you send, it will treat the whole blob as plain text and store and forward the data. That means with our example JSON object, sending the string <code>{&quot;sensor-1&quot;:22.587,&quot;sensor-2&quot;:13.182}</code> will result in <code>{&quot;sensor-1&quot;:22.587,&quot;sensor-2&quot;:13.182}</code> being stored in IO and sent to MQTT subscribers.</p>

<p><strong>NOTE:</strong> This solution is the riskiest, because if your JSON blob includes the key named <code>value</code>, then IO will interpret <em>that</em> as the value you want to store and ignore all the other keys.</p>
<h2 id='that-39-s-not-json-at-all'>That&#39;s not JSON at all!</h2>
<p>If you want to be absolutely sure that Adafruit IO will not interfere with the data you&#39;re sending, encode it as a <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> string first.</p>

<div class="center-column"></div>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">btoa</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="dl">"</span><span class="s2">something</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">here</span><span class="dl">"</span> <span class="p">}))</span>
<span class="c1">// "eyJzb21ldGhpbmciOiJoZXJlIn0="</span>
<span class="nx">atob</span><span class="p">(</span><span class="dl">"</span><span class="s2">eyJzb21ldGhpbmciOiJoZXJlIn0=</span><span class="dl">"</span><span class="p">)</span>
<span class="c1">// {"something":"here"}</span>
</code></pre></div>
<p>This solution is also ideal if you want to store or send binary data with Adafruit IO. You won&#39;t get to see any pretty charts (although we do display base64 encoded images), but your data will remain exactly the way you left it.</p>
<h1 id='webhook-receivers'>Webhook Receivers</h1>
<p>Webhook receiver URLs give you a limited use, unique API address that you can send data to and have it appear in your Adafruit IO feed. Webhook URLs can be shared with anyone and used from anywhere on the web.</p>

<p>You can access a webhook by navigating to your feed and clicking the <em>Webhooks</em> button on the right-hand sidebar.</p>
<h2 id='raw-webhooks'>Raw Webhooks</h2>
<p>If you want to receive the whole contents of webhook events--for example, when receiving webhook notifications from a service like Slack or GitHub where you don&#39;t have control over the payload the service is sending--add <code>/raw</code> to the end of the Adafruit IO webhook URL that you share with the service.</p>
<h2 id='notify-webhooks'>Notify Webhooks</h2>
<p>If you only want to be notified that an event has happened, rather than have to handle all the data from an event--for example, if a service like GitHub is trying to send 7KB of JSON to your ESP8266--add <code>/notify</code> to the end of your Adafruit IO webhook URL. When data arrives, your feed will receive the message &quot;ping&quot;.</p>
<h1 id='securing-your-io-account'>Securing your IO Account</h1>
<p>Your IO Account includes a secret API key. This key is private and should not be shared with anyone.</p>

<p>But, a common pitfalls of the key is it may be accidentally shared by posted code on GitHub or social media. If anyone gains access to your key, <strong>they will have access to your Adafruit IO account</strong>.</p>
<h2 id='i-accidentially-shared-my-key-what-do-i-do-now'>I accidentially shared my key, what do I do now?</h2>
<p>You&#39;ll need to generate a new key. This process is simple, but not reversable. Once you generate a new key for your Adafruit IO account,
all devices using the previous Adafruit IO key will need to be updated to the new key.</p>

<p>To rengenerate your Adafruit IO Key:
* Navigate to io.adafruit.com and log into your account.
* Click the key icon on the header.
* Click the &quot;Regenerate Key&quot; button and confirm the action.
* The value of &quot;Active Key&quot; will change to a new key. Replace all instances of the previous key with the new one.</p>

      </div>

      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">CURL</a>
                <a href="#" data-language-name="cpp">Arduino</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="python">Circuitpython</a>
                <a href="#" data-language-name="ruby">Ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
